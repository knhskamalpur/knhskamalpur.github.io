---
export let title = "Kamalpur Netaji High School (H.S.)";
const { pathname } = Astro.url;

// Helper to check if a path is active
const isActive = (path) => {
  if (path === "/") {
    return pathname === "/" || pathname === "/index.html";
  }
  // Remove trailing slashes for comparison
  const normalizedPathname = pathname.replace(/\/$/, "");
  const normalizedPath = path.replace(/\/$/, "");
  return normalizedPathname === normalizedPath || normalizedPathname.startsWith(normalizedPath + "/");
};
---
<header>
  <div class="header-content">
    <img src="/assets/images/knhs.webp" alt="KNHS Logo" class="logo">
    <div class="header-text">
      <h1>{title}</h1>
      <p class="header-subtitle">Kamalpur • Chhatna • Bankura • West Bengal • 722137</p>
    </div>
  </div>
</header>
<div class="nav-container">
  <button class="mobile-nav-toggle" aria-label="Toggle navigation">
    <i class="fa fa-bars"></i>
  </button>
  <nav id="main-nav">
    <ul>
      <li><a href="/" class={isActive("/") ? "active" : ""}><i class="fa fa-home"></i>Home</a></li>
      <li><a href="/staffs" class={isActive("/staffs") ? "active" : ""}><i class="fa fa-users"></i>Staffs</a></li>
      <li><a href="/various_events" class={isActive("/various_events") ? "active" : ""}><i class="fa fa-calendar"></i>Various Events</a></li>
      <li><a href="/#academics"><i class="fa fa-book"></i>Academics</a></li>
      <li><a href="/gallery" class={isActive("/gallery") ? "active" : ""}><i class="fa fa-image"></i>Gallery</a></li>
      <li><a href="/contact" class={isActive("/contact") ? "active" : ""}><i class="fa fa-phone"></i>Contact</a></li>
      <li><a href="/about" class={isActive("/about") ? "active" : ""}><i class="fa fa-info-circle"></i>About</a></li>
    </ul>
  </nav>
</div>

<script>
  const toggle = document.querySelector('.mobile-nav-toggle');
  const nav = document.querySelector('#main-nav');
  const icon = toggle?.querySelector('i');

  toggle?.addEventListener('click', () => {
    nav?.classList.toggle('is-open');
    toggle.classList.toggle('is-active');
    
    if (icon) {
      if (nav?.classList.contains('is-open')) {
        icon.className = 'fa fa-times';
      } else {
        icon.className = 'fa fa-bars';
      }
    }
  });

  // Close nav when clicking outside
  document.addEventListener('click', (event) => {
    if (nav?.classList.contains('is-open') && 
        !nav.contains(event.target as Node) && 
        !toggle?.contains(event.target as Node)) {
      nav.classList.remove('is-open');
      toggle?.classList.remove('is-active');
      if (icon) icon.className = 'fa fa-bars';
    }
  });
</script>
