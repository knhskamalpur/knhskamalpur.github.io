---
import BaseLayout from "../../../layouts/BaseLayout.astro"
import "../../../styles/apps/photoutils/style.scss"

const description = "Photography utility tool for Kamalpur Netaji High School students to capture, crop, and resize photos to exact dimensions and file sizes required for forms.";
const keywords = "Photo Utils, Image Resizer, Form Photo Toolkit, Capture Photo, Image Crop, Student Utilities, Photo Compression, KNHS Tools";
---

<BaseLayout title="Photo Utils" description={description} keywords={keywords}>
  <Fragment slot="head">
  </Fragment>

  <div class="photo-utils-section">
      <div class="container photo-utils-container">
          <h2>Photo Utils</h2>
          <p>Capture and resize photos with specific dimensions and file size limits.</p>
          
          <div class="controls">
              <div class="control-group">
                  <label for="camera-select">Select Camera:</label>
                  <select id="camera-select"></select>
              </div>
              <div class="control-group">
                  <label for="preset-select">Presets:</label>
                  <select id="preset-select">
                      <option value="">-- Manual --</option>
                      <option value="1920x1080x500x0">HD (1920x1080, 500KB)</option>
                      <option value="1280x720x300x0">SD (1280x720, 300KB)</option>
                      <option value="640x480x100x0">Low (640x480, 100KB)</option>
                  </select>
              </div>
              <div class="control-group">
                  <label for="width">Width (px):</label>
                  <input type="number" id="width" value="1920">
              </div>
              <div class="control-group dim-swap-group">
                  <button id="swap-dims" class="btn-icon" title="Swap Width and Height"><i class="fa fa-refresh"></i></button>
              </div>
              <div class="control-group">
                  <label for="height">Height (px):</label>
                  <input type="number" id="height" value="1080">
              </div>
              <div class="control-group">
                  <label for="max-size">Max File Size (KB):</label>
                  <input type="number" id="max-size" value="500">
              </div>
              <div class="button-group">
                  <button id="save-preset" class="btn-secondary" title="Save current settings as preset"><i class="fa fa-save"></i> Save</button>
                  <button id="delete-preset" class="btn-danger" title="Delete selected preset" style="display: none;"><i class="fa fa-trash"></i> Delete</button>
              </div>
          </div>

          <div class="viewport-container">
              <video id="video" autoplay playsinline></video>
              <canvas id="overlay"></canvas>
          </div>

          <div class="actions-bar">
              <button id="start-camera" class="btn-action" title="Restart Camera"><i class="fa fa-refresh"></i></button>
              <div class="switch-container">
                  <label class="switch" title="Toggle Black & White Mode">
                      <input type="checkbox" id="bw-mode">
                      <span class="slider round"></span>
                  </label>
                  <span class="switch-label">B&W</span>
              </div>
              <button id="capture" class="btn-action btn-capture" title="Capture Photo" disabled><i class="fa fa-camera"></i></button>
          </div>

          <canvas id="capture-canvas" style="display: none;"></canvas>
      </div>
  </div>

  <span slot="scripts">
    <script is:inline src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script is:inline src="/apps/photoutils/script.js"></script>
  </span>
</BaseLayout>
