---
import BaseLayout from '../layouts/BaseLayout.astro'

const events = [
  { img: "5th_september__L.jpg", caption: "5th September" },
  { img: "annual_function__L.jpg", caption: "Annual Function" },
  { img: "annual_sports__L.jpg", caption: "Annual Sports" },
  { img: "a_memorable_day__P.jpg", caption: "A Memorable Day" },
  { img: "caltural_function_by_students__P.jpg", caption: "Cultural Function by Students" },
  { img: "comment_of_ex_students__P.jpg", caption: "Comment of Ex-Students" },
  { img: "COMPUTER_LITERACY_PROJECT__L.jpg", caption: "Computer Literacy Project" },
  { img: "drawing__L.jpg", caption: "Drawing" },
  { img: "games__L.jpg", caption: "Games" },
  { img: "physical_edication__L.jpg", caption: "Physical Education" },
  { img: "plantation__P.jpg", caption: "Plantation" },
  { img: "respect_to_ex_hm__P__1.jpg", caption: "Respect to Ex-HM" },
  { img: "respect_to_ex_hm__P__2.jpg", caption: "Respect to Ex-HM" },
  { img: "students_habit__P.jpg", caption: "Students Habit" },
  { img: "wall_megazine__L.jpg", caption: "Wall Magazine" }
];
---

<BaseLayout title="Various Events">
  <section>
    <h2>Various Events</h2>
    <p>Glimpses of activities and events at our school.</p>
    <div class="gallery-grid">
      {events.map(event => (
        <div class="gallery-item">
          <img src={`/assets/images/various_events/${event.img}`} alt={event.caption} class="gallery-image" loading="lazy">
          <div class="gallery-caption">{event.caption}</div>
        </div>
      ))}
    </div>
  </section>

  <script is:inline>
    function shuffleEvents() {
      const grid = document.querySelector('.gallery-grid');
      if (grid) {
        const nodes = Array.from(grid.children);
        nodes.sort(() => Math.random() - 0.5);
        nodes.forEach(node => grid.appendChild(node));
      }
    }

    // Run on initial load
    shuffleEvents();

    // Support for Astro view transitions
    document.addEventListener('astro:after-swap', shuffleEvents);
  </script>
</BaseLayout>
